<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Mobile Test</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        .box { padding: 20px; margin: 10px 0; border-radius: 8px; }
        .green { background: #d4edda; }
        .red { background: #f8d7da; }
    </style>
</head>
<body>
    <h1>Simple Mobile Test</h1>
    <div id="results"></div>

    <script src="quote.js"></script>
    <script>
        const results = [];

        // Test 1: Is this page loading?
        results.push('<div class="box green">✅ TEST 1: This page loaded successfully</div>');

        // Test 2: Can we run JavaScript?
        results.push('<div class="box green">✅ TEST 2: JavaScript is executing</div>');

        // Test 3: Is quote.js loaded?
        if (typeof QUOTE_JS_VERSION !== 'undefined') {
            results.push(`<div class="box green">✅ TEST 3: quote.js loaded (v${QUOTE_JS_VERSION})</div>`);
        } else {
            results.push('<div class="box red">❌ TEST 3: quote.js NOT loaded</div>');
        }

        // Test 4: Is phoneDatabase available?
        if (typeof phoneDatabase !== 'undefined') {
            const appleCount = phoneDatabase.Apple ? Object.keys(phoneDatabase.Apple).length : 0;
            const samsungCount = phoneDatabase.Samsung ? Object.keys(phoneDatabase.Samsung).length : 0;
            results.push(`<div class="box green">✅ TEST 4: phoneDatabase available (${appleCount} Apple, ${samsungCount} Samsung)</div>`);

            // Test 5: Check specific model
            if (phoneDatabase.Apple && phoneDatabase.Apple['iPhone 17 Pro Max']) {
                const model = phoneDatabase.Apple['iPhone 17 Pro Max'];
                const basePrice = model.basePrice;
                results.push(`<div class="box green">✅ TEST 5: iPhone 17 Pro Max found (Base: $${basePrice})</div>`);

                // Test 6: Calculate price
                try {
                    let maxPrice = basePrice;
                    if (model.storage) {
                        const prices = Object.values(model.storage).map(m => basePrice + m);
                        maxPrice = Math.max(...prices);
                    }
                    const usedPrice = Math.round(maxPrice / 10) * 10;
                    const newPrice = Math.round((maxPrice * 1.15) / 10) * 10;
                    results.push(`<div class="box green">✅ TEST 6: Price calculation works (Used: $${usedPrice}, New: $${newPrice})</div>`);
                } catch (e) {
                    results.push(`<div class="box red">❌ TEST 6: Price calculation failed: ${e.message}</div>`);
                }
            } else {
                results.push('<div class="box red">❌ TEST 5: iPhone 17 Pro Max NOT found in database</div>');
            }
        } else {
            results.push('<div class="box red">❌ TEST 4: phoneDatabase NOT available</div>');
        }

        // Display results
        document.getElementById('results').innerHTML = results.join('');

        // Also log to console
        console.log('='.repeat(60));
        console.log('SIMPLE MOBILE TEST RESULTS:');
        console.log('Device:', /iPhone|iPad|iPod|Android/i.test(navigator.userAgent) ? 'MOBILE' : 'DESKTOP');
        console.log('Screen:', window.innerWidth + 'x' + window.innerHeight);
        console.log('quote.js loaded:', typeof QUOTE_JS_VERSION !== 'undefined');
        console.log('phoneDatabase available:', typeof phoneDatabase !== 'undefined');
        if (typeof phoneDatabase !== 'undefined') {
            console.log('Apple models:', phoneDatabase.Apple ? Object.keys(phoneDatabase.Apple).length : 0);
            console.log('Samsung models:', phoneDatabase.Samsung ? Object.keys(phoneDatabase.Samsung).length : 0);
        }
        console.log('='.repeat(60));
    </script>
</body>
</html>
